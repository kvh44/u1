CREATE TABLE utoconsult_aboutus (id BIGINT AUTO_INCREMENT, content LONGBLOB NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_advertisement (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, title VARCHAR(255) NOT NULL, content TEXT NOT NULL, link TEXT, photo VARCHAR(100), photoicon VARCHAR(100), visitnumber BIGINT, isdeleted TINYINT(1) DEFAULT '0', isvalid TINYINT(1) DEFAULT '1', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX advertisementindex_idx (title), UNIQUE INDEX utoconsult_advertisement_sluggable_idx (slug), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_annoncement (id BIGINT AUTO_INCREMENT, content TEXT NOT NULL, isdeleted TINYINT(1) DEFAULT '0', isvalid TINYINT(1) DEFAULT '1', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_article_category1 (id BIGINT AUTO_INCREMENT, name VARCHAR(15) NOT NULL UNIQUE, photo1 VARCHAR(255), keywords VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_article_category2 (id BIGINT AUTO_INCREMENT, category1_id BIGINT NOT NULL, orders BIGINT, name VARCHAR(15) NOT NULL UNIQUE, keywords VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX category1_id_idx (category1_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_article_comment (id BIGINT AUTO_INCREMENT, article_id BIGINT NOT NULL, user_id BIGINT NOT NULL, content LONGBLOB NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX article_id_idx (article_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_contactus (id BIGINT AUTO_INCREMENT, email VARCHAR(255) NOT NULL, fromid BIGINT, content LONGBLOB NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_file (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, category_id BIGINT, title VARCHAR(255) NOT NULL, keywords VARCHAR(255), description TEXT, file VARCHAR(255) NOT NULL, file_original VARCHAR(255), visitnumber BIGINT, image VARCHAR(255), imageicon VARCHAR(255), lang VARCHAR(20), level BIGINT, isuto TINYINT(1) DEFAULT '0', type VARCHAR(20), isvalid TINYINT(1) DEFAULT '1', isdeleted TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX fileindex_idx (title), UNIQUE INDEX utoconsult_file_sluggable_idx (slug), INDEX category_id_idx (category_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_file_category (id BIGINT AUTO_INCREMENT, category VARCHAR(255) NOT NULL, keywords VARCHAR(255), image VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_message (id BIGINT AUTO_INCREMENT, email VARCHAR(255) NOT NULL, fromid BIGINT NOT NULL, toid BIGINT NOT NULL, content LONGBLOB NOT NULL, isread TINYINT(1) DEFAULT '0', isdeleted TINYINT(1) DEFAULT '0', isvalid TINYINT(1) DEFAULT '1', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX toid_idx (toid), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_my_article_index (keyword VARCHAR(200), field VARCHAR(50), position BIGINT, id BIGINT, PRIMARY KEY(keyword, field, position, id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_my_article (id BIGINT AUTO_INCREMENT, category1_id BIGINT NOT NULL, category2_id BIGINT NOT NULL, keywords VARCHAR(255), description TEXT, title VARCHAR(255) NOT NULL, content LONGBLOB NOT NULL, pdf VARCHAR(255), keywords_en VARCHAR(255), description_en TEXT, title_en VARCHAR(255), content_en LONGBLOB, pdf_en VARCHAR(255), user_id BIGINT NOT NULL, visitnumber BIGINT, comment TINYINT(1) DEFAULT '1', level VARCHAR(255) NOT NULL, isdeleted TINYINT(1) DEFAULT '0', isvalid TINYINT(1) DEFAULT '1', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX articleindex_idx (title), UNIQUE INDEX utoconsult_my_article_sluggable_idx (slug), INDEX category1_id_idx (category1_id), INDEX category2_id_idx (category2_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_photo (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, category_id BIGINT, title VARCHAR(255), content TEXT, photoicon VARCHAR(100) NOT NULL, photosmall VARCHAR(100) NOT NULL, photo VARCHAR(100) NOT NULL, link TEXT, visitnumber BIGINT, isdeleted TINYINT(1) DEFAULT '0', isvalid TINYINT(1) DEFAULT '1', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), UNIQUE INDEX utoconsult_photo_sluggable_idx (slug), INDEX category_id_idx (category_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_photo_category (id BIGINT AUTO_INCREMENT, category VARCHAR(255) NOT NULL, keywords VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_publication (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, category_id BIGINT, title VARCHAR(255) NOT NULL, keywords VARCHAR(255), description LONGBLOB, binarydata LONGBLOB NOT NULL, filename VARCHAR(255), size VARCHAR(255), mime VARCHAR(255), visitnumber BIGINT, image VARCHAR(255), imageicon VARCHAR(255), lang VARCHAR(20), level BIGINT, isuto TINYINT(1) DEFAULT '0', type VARCHAR(20), isvalid TINYINT(1) DEFAULT '1', isdeleted TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX fileindex_idx (title), UNIQUE INDEX utoconsult_publication_sluggable_idx (slug), INDEX category_id_idx (category_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_search_input (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, content VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_tag (id BIGINT AUTO_INCREMENT, title VARCHAR(255) NOT NULL, icon VARCHAR(100), keywords VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_user (id BIGINT AUTO_INCREMENT, username VARCHAR(30) NOT NULL UNIQUE, password VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL UNIQUE, type VARCHAR(255) NOT NULL, level BIGINT, isadmin TINYINT(1) DEFAULT '0', active TINYINT(1) DEFAULT '1', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), UNIQUE INDEX utoconsult_user_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_user_contact (id BIGINT AUTO_INCREMENT, user_id BIGINT UNIQUE NOT NULL, mobile VARCHAR(30), fix VARCHAR(30), fix2 VARCHAR(30), qq VARCHAR(30), msn VARCHAR(255), skype VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_user_information (id BIGINT AUTO_INCREMENT, user_id BIGINT UNIQUE NOT NULL, realname VARCHAR(30) NOT NULL, web TEXT, special VARCHAR(30), description LONGBLOB, country BIGINT, province BIGINT, city BIGINT, area BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE utoconsult_user_profile_photo (id BIGINT AUTO_INCREMENT, user_id BIGINT UNIQUE NOT NULL, photo VARCHAR(100), photoicon VARCHAR(100), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE area (id BIGINT AUTO_INCREMENT, areaid BIGINT, area VARCHAR(255), fatherid BIGINT, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE city (id BIGINT AUTO_INCREMENT, cityid BIGINT, city VARCHAR(255), fatherid BIGINT, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE province (id BIGINT AUTO_INCREMENT, provinceid BIGINT, province VARCHAR(255), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
ALTER TABLE utoconsult_advertisement ADD CONSTRAINT utoconsult_advertisement_user_id_utoconsult_user_id FOREIGN KEY (user_id) REFERENCES utoconsult_user(id) ON DELETE CASCADE;
ALTER TABLE utoconsult_article_category2 ADD CONSTRAINT ucui FOREIGN KEY (category1_id) REFERENCES utoconsult_article_category1(id);
ALTER TABLE utoconsult_article_comment ADD CONSTRAINT utoconsult_article_comment_user_id_utoconsult_user_id FOREIGN KEY (user_id) REFERENCES utoconsult_user(id);
ALTER TABLE utoconsult_article_comment ADD CONSTRAINT utoconsult_article_comment_article_id_utoconsult_my_article_id FOREIGN KEY (article_id) REFERENCES utoconsult_my_article(id);
ALTER TABLE utoconsult_file ADD CONSTRAINT utoconsult_file_user_id_utoconsult_user_id FOREIGN KEY (user_id) REFERENCES utoconsult_user(id);
ALTER TABLE utoconsult_file ADD CONSTRAINT utoconsult_file_category_id_utoconsult_file_category_id FOREIGN KEY (category_id) REFERENCES utoconsult_file_category(id);
ALTER TABLE utoconsult_message ADD CONSTRAINT utoconsult_message_toid_utoconsult_user_id FOREIGN KEY (toid) REFERENCES utoconsult_user(id) ON DELETE CASCADE;
ALTER TABLE utoconsult_my_article_index ADD CONSTRAINT utoconsult_my_article_index_id_utoconsult_my_article_id FOREIGN KEY (id) REFERENCES utoconsult_my_article(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE utoconsult_my_article ADD CONSTRAINT utoconsult_my_article_user_id_utoconsult_user_id FOREIGN KEY (user_id) REFERENCES utoconsult_user(id);
ALTER TABLE utoconsult_my_article ADD CONSTRAINT ucui_2 FOREIGN KEY (category2_id) REFERENCES utoconsult_article_category2(id) ON DELETE CASCADE;
ALTER TABLE utoconsult_my_article ADD CONSTRAINT ucui_1 FOREIGN KEY (category1_id) REFERENCES utoconsult_article_category1(id) ON DELETE CASCADE;
ALTER TABLE utoconsult_photo ADD CONSTRAINT utoconsult_photo_user_id_utoconsult_user_id FOREIGN KEY (user_id) REFERENCES utoconsult_user(id) ON DELETE CASCADE;
ALTER TABLE utoconsult_photo ADD CONSTRAINT utoconsult_photo_category_id_utoconsult_photo_category_id FOREIGN KEY (category_id) REFERENCES utoconsult_photo_category(id) ON DELETE CASCADE;
ALTER TABLE utoconsult_publication ADD CONSTRAINT utoconsult_publication_user_id_utoconsult_user_id FOREIGN KEY (user_id) REFERENCES utoconsult_user(id);
ALTER TABLE utoconsult_publication ADD CONSTRAINT utoconsult_publication_category_id_utoconsult_file_category_id FOREIGN KEY (category_id) REFERENCES utoconsult_file_category(id);
ALTER TABLE utoconsult_search_input ADD CONSTRAINT utoconsult_search_input_user_id_utoconsult_user_id FOREIGN KEY (user_id) REFERENCES utoconsult_user(id) ON DELETE CASCADE;
ALTER TABLE utoconsult_user_contact ADD CONSTRAINT utoconsult_user_contact_user_id_utoconsult_user_id FOREIGN KEY (user_id) REFERENCES utoconsult_user(id) ON DELETE CASCADE;
ALTER TABLE utoconsult_user_information ADD CONSTRAINT utoconsult_user_information_user_id_utoconsult_user_id FOREIGN KEY (user_id) REFERENCES utoconsult_user(id) ON DELETE CASCADE;
ALTER TABLE utoconsult_user_profile_photo ADD CONSTRAINT utoconsult_user_profile_photo_user_id_utoconsult_user_id FOREIGN KEY (user_id) REFERENCES utoconsult_user(id) ON DELETE CASCADE;
